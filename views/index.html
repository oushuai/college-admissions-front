<!DOCTYPE html>
<html>
	<head>
		<!--这一段的逻辑就是 从数据库取出当前pageId存储的js html css canvasStyle 然后恢复页面 进行预览 其中不同ui有不同依赖 自行研究
        直接打开 即可查看：
        http://localhost:1234/publish.html?ui=layui&pageId=1 查看layui
        http://localhost:1234/publish.html?ui=element&pageId=1 查看element
        其他ui暂时不提供预览示例    -->
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<meta name="renderer" content="webkit">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width,initial-scale=1">
		<title>发布</title>
		<meta name="description" content="MagicalCoder,表单布局器,基于jquery,Vue的可视化拖拽布局器">
		<meta name="keywords" content="MagicalCoder,表单布局器,基于jquery,Vue的可视化拖拽布局器">
		<link rel="stylesheet" type="text/css" href="../js/layui/css/layui.css">
		<link rel="stylesheet" type="text/css" href="../js/layui/css/modules/code.css">
		<link rel="stylesheet" type="text/css" href="../js/layui/css/modules/laydate/default/laydate.css">


	</head>


	<body>
		<div id="magicalDragScene" class="mc-root mc-ui-absolute-pane" style="height: 788px;">

			<div class="layui-fluid layui-bg-white" style="left: 0.510204%; top: 0.142857%; width: 93.8776%; height: 1368.01px; padding: 1px;">

				<div class="layui-row">

					<div class="layui-col-xs12 mc-ui-flex-center" style="width: 100%; height: 46px; margin-bottom: 4px; background-color: rgb(26, 145, 133);">

						<label class="layui-form-label mc-ui-flex-center" style="font-size: 15px; font-weight: bolder; word-spacing: 2px; text-align: center; direction: ltr; text-indent: 0px; color: rgb(244, 241, 241);">赣州中专网</label>
					</div>
				</div>
				<ul class="layui-nav layui-bg-green" lay-shrink="all">

					<li class="layui-nav-item"> <a style="color: rgb(255, 255, 255); font-size: 15px;" href="college/rank.html">院校排名</a> </li>
					<li class="layui-nav-item"> <a style="color: rgb(255, 255, 255); font-size: 15px;" href="profession/rank.html">专业排名</a>
					</li>
					<li id="uuid46cecb9c-8087-462a-af1a-8b4d2fd111f2" class="layui-nav-item"> <a style="color: rgb(255, 255, 255); font-size: 15px;"
						 href="qa/index.html">招生问答</a> </li>
					<li id="uuid869e90bf-fba8-4d20-ac4e-c4c35640fe53" class="layui-nav-item"></li>
					<li id="uuidb7826605-54be-42b9-a2bf-b6a3408f2f99" class="layui-nav-item"></li>
				</ul>
				<div class="layui-carousel" style="width: 99.8189%; height: 250px; top: 6px;" mc-attr-bool-autoplay="true"
				 mc-attr-num-interval="3000" mc-attr-str-width="100%" mc-attr-str-anim="default" mc-attr-str-arrow="hover"
				 mc-attr-str-indicator="inside" mc-attr-num-height="250px">

					<div class="magicalcoder-carousel-items" style="top: 7px; width: 100%; height: 243.011px;" carousel-item="">

						<div class="magicalcoder-carousel-item mc-ui-flex-center" style="padding-right: 0px; margin-right: 4px;">

							<img class="mc-ui-flex-center" style="width:100%; position:absolute; height: 229px;" src="../upload/02cb4691-a1be-499c-ab68-5a4b4bd7fe46.jpg" />
						</div>
						<div class="magicalcoder-carousel-item mc-ui-flex-center">

							<img class="mc-ui-flex-center" style="width: 100%; position:absolute; height: 230px;" src="../upload/4b37b32b-0408-4678-a07e-5ba81fb5980b.jpg" />
						</div>
					</div>
				</div>
				<div class="layui-card" style="margin-top: 17px; width: 100.185%;">

					<div class="layui-card-header" style="background-color: rgb(26, 145, 133); width: 92.8834%; transform: rotate(0deg); color: rgb(255, 255, 255); font-weight: bold;">
						| 招考指南
					</div>
					<div class="layui-card-body" style="height: 291px; width: 94.1973%;">

						<div class="layui-row" id="exam" style="height: 265px;">

							<div class="layui-col-md6 layui-col-xs4 mc-ui-absolute-pane mc-ui-flex-center layui-col-lg6" style="height: 133px;">

								<img class="mc-ui-flex-center" style="width: 50%; position: absolute; left: 16.9591%; top: 5%;" src="../upload/41cfbac7-508c-43b2-aaa9-e39b2c9fc061.png" />
								<span class="mc-ui-geometry-char mc-ui-flex-center" style="height: 20px; width: 100px; position: absolute; left: 16.3743%; top: 78%;">重点院校</span>
							</div>
							<div class="layui-col-md6 layui-col-xs4 mc-ui-absolute-pane mc-ui-flex-center layui-col-lg6" style="height: 133px;">
								<a style="position: absolute; left: 3.70344%; top: 2.27253%; width: 89.5069%; height: 124.011px;" href="college/rank.html">
								<img style="width: 50%; position: absolute; left: 21.7647%; top: 4%;" src="../upload/cc1894fa-472e-4cce-a3cf-8be382be3cee.png" />
								<span id="uuid346ee79e-97f1-49f1-9862-1170f5ea4f52" class="mc-ui-geometry-char mc-ui-flex-center" style="height: 20px; width: 100px; position: absolute; left: 16.3743%; top: 78%;">院校排名</span>
								</a>
							</div>
							<div class="layui-col-md6 layui-col-xs4 mc-ui-absolute-pane layui-col-lg6" style="height: 133px;">
								<a style="position: absolute; left: 3.70344%; top: 2.27253%; width: 89.5069%; height: 124.011px;" href="profession/rank.html">
								<img style="width: 50%; position: absolute; left: 25.1462%; top: 6.10687%;" src="../upload/22cc7bea-0865-444a-ac94-69aa5ee393f3.png" />
								<span id="uuid107c25fe-05ea-42dd-b909-4c677939931d" class="mc-ui-geometry-char mc-ui-flex-center" style="height: 20px; width: 100px; position: absolute; left: 20%; top: 78%;">专业排名</span>
							</a>
							</div>
							<div class="layui-col-md6 layui-col-xs4 mc-ui-absolute-pane layui-col-lg6" style="height: 133px;">

								<img style="width: 50%; position: absolute; left: 18%; top: 6.10687%;" src="../upload/25a8ebe2-f179-4f81-be39-b1df78de9687.png" />
								<span id="uuid8d2d5d9d-b089-4e2c-a11c-020b34d49379" class="mc-ui-geometry-char mc-ui-flex-center" style="height: 20px; width: 100px; position: absolute; left: 14%; top: 78%;">热门专业</span>
							</div>
							<div class="layui-col-md6 layui-col-xs4 mc-ui-absolute-pane layui-col-lg6" style="height: 133px;">
								<a href="qa/index.html">
								<img style="width: 50%; position: absolute; left: 25.1462%; top: 6.10687%;" src="../upload/bcad275b-d1ba-4881-9c7b-b2d359fc0437.png" />
								<span id="uuidce3ce8ee-c78f-4454-bcd0-58fe9c138b9b" class="mc-ui-geometry-char mc-ui-flex-center" style="height: 20px; width: 100px; position: absolute; left: 20%; top: 78%;">招生问答</span>
								</a>
							</div>
							<div class="layui-col-md6 layui-col-xs4 mc-ui-absolute-pane layui-col-lg6" style="height: 133px;">
								<a href="apply/index.html">
								<img style="width: 50%; position: absolute; left: 25.1462%; top: 6.10687%;" src="../upload/0408d5a1-ed39-4d8e-94f7-b537a78915cf.png" />
								<span id="uuid7852f66e-ad09-40ef-a74d-47c63c1063db" class="mc-ui-geometry-char mc-ui-flex-center" style="height: 20px; width: 100px; position: absolute; left: 20%; top: 78%;">网上报名</span>
							</a>
							</div>
						</div>
					</div>
				</div>
				<div class="layui-card">

					<div class="layui-card-header" style="background-color: rgb(26, 145, 133); width: 92.6895%; color: rgb(255, 255, 255); font-weight: bold;">
						| 学校大全
					</div>
					<div class="layui-card-body" style="height: 323.011px; width: 94.5176%;">

						<div class="layui-row" id="college">

							<div class="layui-col-xs4 mc-ui-absolute-pane" style="height: 175px;text-align: center;">
								<a class="college-img" href="college/college.html">
								<img style="width: 78.3626%; position: absolute; left: 11.1111%; top: 2.31214%; height: 125px;" src="" />
								<div style="margin-top: 140px;text-align: center;"></div>
								</a>
							</div>
							<div class="layui-col-xs4 mc-ui-absolute-pane" style="height: 175px;">
								<a class="college-img" href="college/college.html">
								<img style="width: 78.3626%; position: absolute; left: 11.1111%; top: 2.31214%; height: 125px;" src="" />
								<div style="margin-top: 140px;text-align: center;"></div>
								</a>
							</div>
							<div class="layui-col-xs4 mc-ui-absolute-pane" style="height: 175px;">
								<a class="college-img" href="college/college.html">
								<img style="width: 78.3626%; position: absolute; left: 11.1111%; top: 2.31214%; height: 125px;" src="" />
							<div style="margin-top: 140px;text-align: center;"></div>
								</a>
							</div>
							<div class="layui-col-xs4 mc-ui-absolute-pane" style="height: 175px;">
								<a class="college-img" href="college/college.html">
								<img style="width: 78.3626%; position: absolute; left: 11.1111%; top: 2.31214%; height: 125px;" src="" />
								<div style="margin-top: 140px;text-align: center;"></div>
								</a>
							</div>
							<div class="layui-col-xs4 mc-ui-absolute-pane" style="height: 175px;">
								<a class="college-img" href="college/college.html">
								<img style="width: 78.3626%; position: absolute; left: 11.1111%; top: 2.31214%; height: 125px;" src="" />
								<div style="margin-top: 140px;text-align: center;"></div>
								</a>
							</div>
							<div class="layui-col-xs4 mc-ui-absolute-pane" style="height: 175px;">
								<a class="college-img" href="college/college.html">
								<img style="width: 78.3626%; position: absolute; left: 11.1111%; top: 2.31214%; height: 125px;" src="" />
							<div style="margin-top: 140px;text-align: center;"></div>
								</a>
							</div>
						</div>
					</div>
				</div>
				<div class="layui-card">

					<div class="layui-card-header" style="background-color: rgb(26, 145, 133); color: rgb(255, 255, 255); font-weight: bold;">
						| 招生资讯
					</div>
					<div class="layui-card-body" style="border-bottom-color: rgb(234, 227, 227);">

						<table class="layui-table">

							<tbody>

			
								<tr>

									<td><a href="qa/detail.html"></a></td>
								</tr>
								<tr>

									<td><a href="qa/detail.html"></a></td>
								</tr>
								<tr>

									<td><a href="qa/detail.html"></a></td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
		<script type="text/javascript" src="../js/jquery.min.js"></script>
		<script type="text/javascript" src="../js/layui/layui.all.js"></script>
		<script src="../js/axios.js"></script>
		<script>
			var $ = layui.jquery,
				laytpl = layui.laytpl,
				laydate = layui.laydate,
				form = layui.form,
				layedit = layui.layedit,
				slider = layui.slider,
				element = layui.element,
				colorpicker = layui.colorpicker,
				upload = layui.upload,
				rate = layui.rate,
				carousel = layui.carousel,
				table = layui.table,
				flow = layui.flow;
			var magicalDragLayuiUtil = {
				rebuildLayUiControls: function() {
					var _t = this;
					//日期 
					$(".magicalcoder-laydate").each(function(idx, item) {
						laydate.render(_t.iteratorAttr({
								elem: item
							},
							item));
					})

					//富文本
					$(".magicalcoder-layedit").each(function(idx, item) {
						var mcDataId = $(item).attr(id);
						if (mcDataId) {
							layedit.build(mcDataId, {
								height: 300
							});
						}
					})
					//外键 
					$(".magicalcoder-foreign-select2").each(function(idx, item) {
						var mcDataId = $(item).attr(id);
						if (mcDataId) {
							$("# + mcDataId").select2({
								allowClear: true,
								width: 150,
								delay: 500,
							});
						}
					})
					//颜色选择器
					$(".magicalcoder-color-picker").each(function(idx, item) {
						colorpicker.render(_t.iteratorAttr({
								elem: $(item)
							},
							item));
					})
					//上传组件
					$(".magicalcoder-layupload").each(function(idx, item) {
						upload.render(_t.iteratorAttr({
								elem: $(item)
							},
							item));
					})
					//滑块 
					$(".magicalcoder-slider").each(function(idx, item) {
						slider.render(_t.iteratorAttr({
								elem: $(item)
							},
							item));
					})
					//评分
					$(".magicalcoder-rate").each(function(idx, item) {
						rate.render(_t.iteratorAttr({
								elem: $(item)
							},
							item));
					})
					//轮播
					$(".layui-carousel").each(function(idx, item) {
						carousel.render(_t.iteratorAttr({
								elem: $(item)
							},
							item));
					})
					//流加载 
					$(".magicalcoder-flow").each(function(idx, item) {
						flow.load(_t.iteratorAttr({
								elem: $(item)
							},
							item));
					})
					//代码
					$(".magicalcoder-code").each(function(idx, item) {
						layui.code(_t.iteratorAttr({
								elem: $(item)
							},
							item));
					})
					//弹窗
					$(".magicalcoder-layer").each(function(idx, item) {
						//先隐藏起来
						$(this).next().hide();
						$(this).click(function() {
							var config = _t.iteratorAttr({
									elem: $(item)
								},
								item);
							var type = config.type;
							if (type + '' == 1) {
								config.content = $(this).next();
								if (!config.content.hasClass(magicalcoder - layer - content)) {
									config.content = config.content.find(".magicalcoder-layer-content")
								}
							}
							if (config.btn) {
								config.btn = config.btn.split(",")
							}
							if (config.area) {
								config.area = config.area.split(",")
							}
							layer.open(config)
						})
					})
					//动态表格 我们单独封装了layui-table的初始化方式 至于数据排序 返回格式 等操作请根据你的具体环境自行封装 
					$(".magicalcoder-table").each(function(idx, item) {
						var cols = [];
						//读取列配置
						$(this).find(".magicalcoder-table-th").each(function(i, th) {
							cols.push(_t.iteratorAttr({
									title: $(this).text()
								},
								th));
						})
						var tableConfig = _t.iteratorAttr({
								elem: $(item),
								cols: [cols]
							},
							item);
						//初始化表格 至于返回的数据格式 您可以根据自己的系统自行改造 这里仅做一个示例 参考js\\\\data\\\\list.json 
						table.render(tableConfig);
					})
					//部分组件初始化 
					element.init();
					//表单初始化 
					form.render();
				},
				//将标签上的属性 转换成layui函数初始化时的参数名:参数值
				iteratorAttr: function(renderConfig, dom) {
					var attrs = dom.attributes;
					for (var i = 0; i < attrs.length; i++) {
						var attr = attrs[i];
						var name = attr.name;
						var value = attr.value;
						if (name.indexOf("mc -") === 0) {
							name = name.replace("mc-attr-", '');
							name = name.replace("mc-event-", '');
							if (name.indexOf('str-') === 0) {
								name = name.replace('str-', '');
							} else if (name.indexOf('bool-') === 0) {
								name = name.replace('bool-', '');
								value == 'true' || value === '' ? value = true : value = value;
								value == 'false' ? value = false : value = value;
							} else if (name.indexOf('num-') === 0) {
								name = name.replace('num-', '');
								if (value !== '' && !isNaN(value)) {
									value = parseFloat(value);
								}
							} else if (name.indexOf('json-') === 0) {
								name = name.replace('json-', '');
								if (value !== '') {
									value = JSON.parse(value);
								}
							}
							renderConfig[this.htmlAttrNameToTuoFeng(name)] = value;
						}
					}
					return renderConfig;
				},
				//user-name -&gt; userName html上的标签名转换成驼峰名称
				htmlAttrNameToTuoFeng: function(name) {
					var arr = name.split('-');
					var newArr = []
					for (var i = 0; i < arr.length; i++) {
						if (i != 0) {
							if (arr[i] != '') {
								newArr.push(this.firstCharToUpLower(arr[i]));
							}
						} else {
							newArr.push(arr[i]);
						}
					}
					return newArr.join('');
				},
				//首字母大写 
				firstCharToUpLower: function(name) {
					var arr = name.split();
					arr[0] = arr[0].toUpperCase();
					return arr.join('');
				},
			};
			magicalDragLayuiUtil.rebuildLayUiControls();
			//echarts自动初始化
			// new McECharts().render();
		</script>

		<script>
			// axios.defaults.baseURI = 'http://127.0.0.1:80';
			const instance = axios.create({
				baseURL: 'http://127.0.0.1:80'
			});

			function collegeList(value, index, array) {
				// $("#college").children("div").children("img:eq("+index+")").attr("src",value.lego);
				$("#college div a img:eq(" + index + ")").attr("src", value.lego);
				$("#college div a div:eq(" + index + ")").text(value.name);
				var href = $(".college-img:eq(" + index + ")").attr('href');
				$(".college-img:eq(" + index + ")").attr("href",href+"?id="+value.id);
				
			};

			function getCollegeList() {
				//	var usernameValue = $("#userId").val();

				instance.post('/college/school/list', {

					})
					.then(function(response) {
			
						response.data.rows.forEach(collegeList);
					})
					.catch(function(error) {
						console.log(error);
					});
			};
			function QAList(value, index, array) {
				// $("#college").children("div").children("img:eq("+index+")").attr("src",value.lego);
				var rawQA = value.qa;
				 var txt = rawQA.replace(/<[^>]+>/g,"");
				$(".layui-table tbody tr td a:eq(" + index + ")").text(txt);
				var href = $(".layui-table tbody tr td a:eq(" + index + ")").attr('href');
				$(".layui-table tbody tr td a:eq(" + index + ")").attr("href",href+"?id="+value.id);
			};
			function getQAList() {
				//	var usernameValue = $("#userId").val();

				instance.post('/college/answer/web/list', {

					})
					.then(function(response) {
						//拿到school的name值
						//	  usernameValue = response.data.rows[0].name;
						response.data.rows.forEach(QAList);
					})
					.catch(function(error) {
						console.log(error);
					});
			};
			window.onload = getCollegeList();
			window.onload = getQAList();
		</script>
	</body>
</html>
